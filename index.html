<!-- Chosen Palette: Warm Neutrals (Background: neutral-100/white, Primary: indigo-600/700, Secondary: teal-500/600, Alert: red-500/700) -->
<!-- Application Structure Plan: Dashboard/Tab-based approach. The content is divided into 3 main views: Overview (Key Stats/Charts), Research (Detailed Data/Methodology), and Game (Interactive Demo). This structure is chosen to separate high-level consumption from deep analysis and practical application, allowing users to choose their exploration path efficiently. The Research tab is further structured with expandable detail sections. -->
<!-- Visualization & Content Choices: 1. Key Stats: Dynamic Counters (HTML/JS) - Goal: Inform, Interaction: On-load animation. 2. Main Correlation Chart: Scatter Plot (Chart.js/Canvas) - Goal: Relationship, Interaction: Click to focus/detail, Justification: Visually shows correlation between usage and perceived usefulness. 3. Likert Scales: Grouped Bar Charts (Chart.js/Canvas) - Goal: Compare, Interaction: Toggle between dimensions (PU/PEOU), Justification: Clearly presents distribution of student opinions. 4. Detailed Data: Interactive/Sortable HTML Tables - Goal: Organize/Inform, Interaction: Expand/Collapse details, Justification: Presents raw frequency data (N=100) clearly without requiring complex charting. CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·ª®ng D·ª•ng Nghi√™n C·ª©u Ngo·∫°i Ng·ªØ - AI & Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .tab-button { transition: all 0.3s; border-radius: 0.5rem 0.5rem 0 0; }
        .tab-button.active { background-color: #ffffff; color: #4f46e5; border-bottom: 3px solid #4f46e5; }
        .card { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05); }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        .details-summary { padding: 1rem 1.5rem; font-weight: 600; cursor: pointer; display: block; }
        .details-summary::-webkit-details-marker { display: none; }
        .details-content { padding: 1.5rem; background-color: #ffffff; }
        .text-primary { color: #4f46e5; }
        .text-secondary { color: #14b8a6; }
        .text-accent-red { color: #ef4444; }
        .bg-primary-light { background-color: #eef2ff; }
        /* Responsive Table adjustments */
        @media (max-width: 768px) {
            .details-content table { font-size: 0.75rem; }
            .details-content th, .details-content td { padding-left: 0.25rem; padding-right: 0.25rem; }
            .details-content table td:first-child { min-width: 150px; }
            .chart-container { height: 280px; max-height: 300px; }
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-indigo-700">·ª®NG D·ª§NG H·ªåC NGO·∫†I NG·ªÆ (AI & GAME)</h1>
                <nav class="flex space-x-2 sm:space-x-4">
                    <button id="tab-overview" class="tab-button active text-sm sm:text-base px-3 py-2 text-indigo-700 hover:text-indigo-500">T·ªïng Quan</button>
                    <button id="tab-research" class="tab-button text-sm sm:text-base px-3 py-2 text-gray-600 hover:text-indigo-500">Nghi√™n C·ª©u</button>
                    <button id="tab-game" class="tab-button text-sm sm:text-base px-3 py-2 text-gray-600 hover:text-indigo-500">Game Demo</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content Container -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Overview Tab (Tab 1) -->
        <div id="content-overview" class="tab-content space-y-8">
            <!-- Introduction -->
            <div class="bg-white p-6 sm:p-8 rounded-xl card">
                <h2 class="text-3xl font-bold mb-4 text-indigo-700">T·ªïng Quan Nghi√™n C·ª©u & ·ª®ng D·ª•ng</h2>
                <p class="text-gray-600 leading-relaxed">Ph·∫ßn n√†y cung c·∫•p c√°i nh√¨n t·ªïng qu√°t v·ªÅ k·∫øt qu·∫£ kh·∫£o s√°t "Th√°i ƒë·ªô v√† Nh·∫≠n th·ª©c c·ªßa h·ªçc sinh Ph·ªï th√¥ng v·ªÅ vi·ªác h·ªçc ngo·∫°i ng·ªØ qua ChatGPT" v√† t√≥m t·∫Øt m√¥ h√¨nh ·ª©ng d·ª•ng game ƒë∆∞·ª£c ƒë·ªÅ xu·∫•t. D·ªØ li·ªáu kh·∫£o s√°t ($N=100$) ƒë∆∞·ª£c tr√¨nh b√†y qua c√°c ch·ªâ s·ªë v√† bi·ªÉu ƒë·ªì ch√≠nh, gi√∫p ng∆∞·ªùi d√πng nhanh ch√≥ng n·∫Øm b·∫Øt c√°c xu h∆∞·ªõng quan tr·ªçng.</p>
            </div>

            <!-- Key Metrics Summary -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Metric 1: PU Score -->
                <div class="bg-white p-6 rounded-xl card flex flex-col items-center justify-center border-b-4 border-indigo-500">
                    <div class="text-5xl font-extrabold text-indigo-600" id="stat-pu">0.00</div>
                    <div class="text-lg font-medium text-gray-500 mt-2">T√≠nh H·ªØu √çch C·∫£m Nh·∫≠n </div>
                    <div class="text-sm text-gray-400 mt-1">ƒê√°nh gi√° cao kh·∫£ nƒÉng Vi·∫øt.</div>
                </div>
                <!-- Metric 2: PEOU Score -->
                <div class="bg-white p-6 rounded-xl card flex flex-col items-center justify-center border-b-4 border-teal-500">
                    <div class="text-5xl font-extrabold text-teal-600" id="stat-peou">0.00</div>
                    <div class="text-lg font-medium text-gray-500 mt-2">T√≠nh D·ªÖ S·ª≠ D·ª•ng </div>
                    <div class="text-sm text-gray-400 mt-1">Giao di·ªán ƒë∆°n gi·∫£n, d·ªÖ thao t√°c.</div>
                </div>
                <!-- Metric 3: Attitude Score -->
                <div class="bg-white p-6 rounded-xl card flex flex-col items-center justify-center border-b-4 border-indigo-300">
                    <div class="text-5xl font-extrabold text-indigo-400" id="stat-at">0.00</div>
                    <div class="text-lg font-medium text-gray-500 mt-2">Th√°i ƒê·ªô T√≠ch C·ª±c </div>
                    <div class="text-sm text-gray-400 mt-1">H·ª©ng th√∫ v√† xem l√† tr·∫£i nghi·ªám th√∫ v·ªã.</div>
                </div>
                <!-- Metric 4: Risk Perception -->
                <div class="bg-white p-6 rounded-xl card flex flex-col items-center justify-center border-b-4 border-red-500">
                    <div class="text-5xl font-extrabold text-red-600" id="stat-erp">0.00</div>
                    <div class="text-lg font-medium text-gray-500 mt-2">Nh·∫≠n th·ª©c R·ªßi ro </div>
                    <div class="text-sm text-gray-400 mt-1">Lo ng·∫°i cao v·ªÅ s·ª± ph·ª• thu·ªôc.</div>
                </div>
            </div>

            <!-- Main Charts Row -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Chart 1: PU/PEOU Comparison -->
                <div class="bg-white p-6 rounded-xl card flex flex-col">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">So s√°nh Nh·∫≠n th·ª©c (PU vs PEOU)</h3>
                    <p class="text-sm text-gray-500 mb-4">Bi·ªÉu ƒë·ªì so s√°nh ƒëi·ªÉm trung b√¨nh gi·ªØa T√≠nh H·ªØu √çch v√† T√≠nh D·ªÖ S·ª≠ D·ª•ng c·∫£m nh·∫≠n. PEOU cao h∆°n cho th·∫•y n·ªÅn t·∫£ng AI d·ªÖ d√†ng ti·∫øp c·∫≠n ng∆∞·ªùi d√πng.</p>
                    <div class="chart-container flex-grow">
                        <canvas id="chart-pu-peou"></canvas>
                    </div>
                </div>

                <!-- Chart 2: Attitude & Risk -->
                <div class="bg-white p-6 rounded-xl card flex flex-col">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Th√°i ƒë·ªô v√† R·ªßi ro (AT vs ERP)</h3>
                    <p class="text-sm text-gray-500 mb-4">M·ªëi quan h·ªá gi·ªØa Th√°i ƒë·ªô t√≠ch c·ª±c (AT) v√† m·ª©c ƒë·ªô Nh·∫≠n th·ª©c r·ªßi ro (ERP). S·ª± ch√™nh l·ªách gi·ªØa hai y·∫øu t·ªë n√†y l√† n·ªÅn t·∫£ng cho h√†nh vi s·ª≠ d·ª•ng.</p>
                    <div class="chart-container flex-grow">
                        <canvas id="chart-at-erp"></canvas>
                    </div>
                </div>
            </div>

            <!-- Game Application Summary -->
            <div class="bg-white p-6 sm:p-8 rounded-xl card border-t-4 border-teal-500">
                <h2 class="text-3xl font-bold mb-4 text-teal-700">M√¥ H√¨nh ·ª®ng D·ª•ng Game H√≥a</h2>
                <p class="text-gray-600 leading-relaxed mb-4">Ph·∫ßn n√†y t√≥m t·∫Øt √Ω t∆∞·ªüng ph√°t tri·ªÉn m·ªôt ·ª©ng d·ª•ng h·ªçc ngo·∫°i ng·ªØ t√≠ch h·ª£p y·∫øu t·ªë Game h√≥a, t·∫≠p trung v√†o vi·ªác **tƒÉng c∆∞·ªùng k·ªπ nƒÉng H·ªôi tho·∫°i (Speaking)** ‚Äì kh√≠a c·∫°nh ƒë∆∞·ª£c ƒë√°nh gi√° th·∫•p nh·∫•t trong thang ƒëo PU. ·ª®ng d·ª•ng s·∫Ω s·ª≠ d·ª•ng AI ƒë·ªÉ t·∫°o k·ªãch b·∫£n nh·∫≠p vai v√† ph·∫£n h·ªìi tr·ª±c ti·∫øp, bi·∫øn vi·ªác h·ªçc th√†nh m·ªôt tr·∫£i nghi·ªám gi·∫£i tr√≠, k√≠ch th√≠ch h√†nh vi ƒë·ªëi ph√≥ r·ªßi ro (RC) t√≠ch c·ª±c.</p>
                <button onclick="changeTab('game')" class="mt-4 bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-lg transition duration-200 shadow-md">
                    Kh√°m ph√° Game Demo
                </button>
            </div>
        </div>

        <!-- Research Tab (Tab 2) -->
        <div id="content-research" class="tab-content hidden space-y-8">
            <!-- Research Container -->
            <div class="space-y-6">
                <!-- Introduction -->
                <div class="bg-white p-6 sm:p-8 rounded-xl card">
                    <h2 class="text-3xl font-bold mb-4 text-indigo-700">Nghi√™n C·ª©u & Ph√¢n T√≠ch Chuy√™n S√¢u</h2>
                    <p class="text-gray-600 leading-relaxed">Ph·∫ßn n√†y cung c·∫•p c√°c b·∫£ng d·ªØ li·ªáu kh·∫£o s√°t chi ti·∫øt theo t·ª´ng m·ª•c (Item), c√πng v·ªõi c√°c t√†i li·ªáu v√† h∆∞·ªõng d·∫´n ·ª©ng d·ª•ng AI c√≥ tr√°ch nhi·ªám, ph·ª•c v·ª• cho m·ª•c ƒë√≠ch ph√¢n t√≠ch h·ªçc thu·∫≠t v√† ƒë∆∞a ra khuy·∫øn ngh·ªã.</p>
                </div>
                
                <!-- T√ÄI LI·ªÜU B·ªî SUNG (CHI TI·∫æT) -->
                <div class="bg-white rounded-xl card mb-8">
                    <h2 class="text-2xl font-semibold text-gray-800 p-6 border-b flex items-center">
                        <span class="mr-2 text-indigo-500"></span> T√†i li·ªáu & H∆∞·ªõng d·∫´n Chi ti·∫øt
                    </h2>

                    <!-- 5.1 D·ªÆ LI·ªÜU KH·∫¢O S√ÅT CHI TI·∫æT (UPDATED) -->
                    <details class="border-b" open>
                        <summary class="details-summary bg-gray-50 hover:bg-gray-100">Chi ti·∫øt D·ªØ li·ªáu Kh·∫£o s√°t (Theo t·ª´ng Item - N=100)</summary>
                        <div class="details-content space-y-6">
                            <p class="text-sm mb-3 text-gray-600">D·ªØ li·ªáu t·ªïng h·ª£p (N=100) chi ti·∫øt t·ª∑ l·ªá ph·∫£n h·ªìi (Thang ƒëo Likert 5 m·ª©c: 1=Ho√†n to√†n Kh√¥ng ƒë·ªìng √Ω ƒë·∫øn 5=Ho√†n to√†n ƒê·ªìng √Ω) cho t·ª´ng ph√°t bi·ªÉu.</p>
                            
                            <!-- Table 1: PU -->
                            <h4 class="text-lg font-semibold text-primary">1. Nh·∫≠n th·ª©c v·ªÅ T√≠nh h·ªØu √≠ch (Perceived Usefulness - PU)</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-100">
                                        <tr>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ph√°t bi·ªÉu (PU)</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider" title="Ho√†n to√†n Kh√¥ng ƒë·ªìng √Ω">(1) %</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider" title="Kh√¥ng ƒë·ªìng √Ω">(2) %</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider" title="B√¨nh th∆∞·ªùng">(3) %</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider" title="ƒê·ªìng √Ω">(4) %</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider" title="Ho√†n to√†n ƒê·ªìng √Ω">(5) %</th>
                                            <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Trung b√¨nh </th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                        <tr><td class="px-4 py-3 font-medium">PU4: C·∫£i thi·ªán k·ªπ nƒÉng Vi·∫øt</td><td class="px-2 py-3 text-center">2%</td><td class="px-2 py-3 text-center">3%</td><td class="px-2 py-3 text-center">10.0%</td><td class="px-2 py-3 text-center">35.0%</td><td class="px-2 py-3 text-center font-bold text-primary">50.0%</td><td class="px-4 py-3 text-center font-bold text-primary">4.25</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">PU2: H·ªØu √≠ch h·ªçc t·ª´ v·ª±ng/ng·ªØ ph√°p</td><td class="px-2 py-3 text-center">1.0%</td><td class="px-2 py-3 text-center">4.0%</td><td class="px-2 py-3 text-center">15.0%</td><td class="px-2 py-3 text-center font-bold">40.0%</td><td class="px-2 py-3 text-center font-bold text-primary">40.0%</td><td class="px-4 py-3 text-center font-bold text-primary">4.10</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">PU3: Gi√∫p ti·∫øt ki·ªám th·ªùi gian</td><td class="px-2 py-3 text-center">3.0%</td><td class="px-2 py-3 text-center">8.0%</td><td class="px-2 py-3 text-center">18.0%</td><td class="px-2 py-3 text-center font-bold">38.0%</td><td class="px-2 py-3 text-center">33.0%</td><td class="px-4 py-3 text-center font-bold text-primary">3.95</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">PU5: H·ªó tr·ª£ luy·ªán t·∫≠p h·ªôi tho·∫°i (N√≥i)</td><td class="px-2 py-3 text-center">5.0%</td><td class="px-2 py-3 text-center">12.0%</td><td class="px-2 py-3 text-center">20.0%</td><td class="px-2 py-3 text-center font-bold">35.0%</td><td class="px-2 py-3 text-center">28.0%</td><td class="px-4 py-3 text-center font-bold text-gray-700">3.65</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">PU1: Gi√∫p c·∫£i thi·ªán ƒëi·ªÉm s·ªë</td><td class="px-2 py-3 text-center">6.0%</td><td class="px-2 py-3 text-center">15.0%</td><td class="px-2 py-3 text-center">24.0%</td><td class="px-2 py-3 text-center">30.0%</td><td class="px-2 py-3 text-center">25.0%</td><td class="px-4 py-3 text-center font-bold text-gray-700">3.50</td></tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Table 2: PEOU -->
                            <h4 class="text-lg font-semibold text-secondary mt-6">2. Nh·∫≠n th·ª©c v·ªÅ T√≠nh d·ªÖ s·ª≠ d·ª•ng (Perceived Ease of Use - PEOU)</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-100">
                                        <tr>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ph√°t bi·ªÉu (PEOU)</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(1) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(2) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(3) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(4) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(5) %</th>
                                            <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Trung b√¨nh </th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                        <tr><td class="px-4 py-3 font-medium">PEOU2: Giao di·ªán th√¢n thi·ªán</td><td class="px-2 py-3 text-center">1.0%</td><td class="px-2 py-3 text-center">2.0%</td><td class="px-2 py-3 text-center">9.0%</td><td class="px-2 py-3 text-center font-bold">45.0%</td><td class="px-2 py-3 text-center font-bold text-secondary">43.0%</td><td class="px-4 py-3 text-center font-bold text-secondary">4.30</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">PEOU1: R·∫•t d·ªÖ d√†ng s·ª≠ d·ª•ng</td><td class="px-2 py-3 text-center">1.0%</td><td class="px-2 py-3 text-center">3.0%</td><td class="px-2 py-3 text-center">12.0%</td><td class="px-2 py-3 text-center font-bold">40.0%</td><td class="px-2 py-3 text-center font-bold text-secondary">44.0%</td><td class="px-4 py-3 text-center font-bold text-secondary">4.20</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">PEOU3: D·ªÖ d√†ng t√¨m th·∫•y c√¢u tr·∫£ l·ªùi</td><td class="px-2 py-3 text-center">2.0%</td><td class="px-2 py-3 text-center">5.0%</td><td class="px-2 py-3 text-center">10.0%</td><td class="px-2 py-3 text-center font-bold">48.0%</td><td class="px-2 py-3 text-center">35.0%</td><td class="px-4 py-3 text-center font-bold text-secondary">4.15</td></tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Table 3: AT -->
                            <h4 class="text-lg font-semibold text-primary mt-6">3. Th√°i ƒë·ªô s·ª≠ d·ª•ng (Attitude toward Usage - AT)</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-100">
                                        <tr>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ph√°t bi·ªÉu (AT)</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(1) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(2) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(3) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(4) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(5) %</th>
                                            <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Trung b√¨nh </th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                        <tr><td class="px-4 py-3 font-medium">AT2: L√† m·ªôt tr·∫£i nghi·ªám th√∫ v·ªã</td><td class="px-2 py-3 text-center">1.0%</td><td class="px-2 py-3 text-center">3.0%</td><td class="px-2 py-3 text-center">6.0%</td><td class="px-2 py-3 text-center">40.0%</td><td class="px-2 py-3 text-center font-bold text-primary">50.0%</td><td class="px-4 py-3 text-center font-bold text-primary">4.35</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">AT1: C·∫£m th·∫•y h·ª©ng th√∫ v√† th√≠ch th√∫</td><td class="px-2 py-3 text-center">2.0%</td><td class="px-2 py-3 text-center">4.0%</td><td class="px-2 py-3 text-center">10.0%</td><td class="px-2 py-3 text-center">38.0%</td><td class="px-2 py-3 text-center font-bold text-primary">46.0%</td><td class="px-4 py-3 text-center font-bold text-primary">4.20</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">AT3: Tin r·∫±ng l√† m·ªôt √Ω t∆∞·ªüng t·ªët</td><td class="px-2 py-3 text-center">1.0%</td><td class="px-2 py-3 text-center">5.0%</td><td class="px-2 py-3 text-center">15.0%</td><td class="px-2 py-3 text-center font-bold">40.0%</td><td class="px-2 py-3 text-center">39.0%</td><td class="px-4 py-3 text-center font-bold text-primary">4.15</td></tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Table 4: ERP -->
                            <h4 class="text-lg font-semibold text-accent-red mt-6">4. Nh·∫≠n th·ª©c v·ªÅ R·ªßi ro ƒê·∫°o ƒë·ª©c H·ªçc thu·∫≠t (Ethics & Risk Perception - ERP)</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-100">
                                        <tr>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ph√°t bi·ªÉu (ERP)</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(1) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(2) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(3) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(4) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(5) %</th>
                                            <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Trung b√¨nh </th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                        <tr><td class="px-4 py-3 font-medium">ERP2: S·ª£ b·ªã ph·ª• thu·ªôc/l∆∞·ªùi t∆∞ duy</td><td class="px-2 py-3 text-center">2.0%</td><td class="px-2 py-3 text-center">5.0%</td><td class="px-2 py-3 text-center">15.0%</td><td class="px-2 py-3 text-center">35.0%</td><td class="px-2 py-3 text-center font-bold text-accent-red">43.0%</td><td class="px-4 py-3 text-center font-bold text-accent-red">4.10</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">ERP1: Lo l·∫Øng v·ªÅ gian l·∫≠n h·ªçc thu·∫≠t</td><td class="px-2 py-3 text-center">5.0%</td><td class="px-2 py-3 text-center">10.0%</td><td class="px-2 py-3 text-center">20.0%</td><td class="px-2 py-3 text-center font-bold">35.0%</td><td class="px-2 py-3 text-center">30.0%</td><td class="px-4 py-3 text-center font-bold text-accent-red">3.85</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">ERP4: Gi√°o vi√™n n√™n c·∫•m s·ª≠ d·ª•ng</td><td class="px-2 py-3 text-center font-bold text-gray-700">20.0%</td><td class="px-2 py-3 text-center">18.0%</td><td class="px-2 py-3 text-center">17.0%</td><td class="px-2 py-3 text-center">25.0%</td><td class="px-2 py-3 text-center">20.0%</td><td class="px-4 py-3 text-center font-bold text-gray-700">3.20</td></tr>
                                        <tr><td class="px-4 py-3 font-medium italic">(Ng∆∞·ª£c) ERP3: Lu√¥n ch√≠nh x√°c</td><td class="px-2 py-3 text-center font-bold text-gray-700">45.0%</td><td class="px-2 py-3 text-center font-bold text-gray-700">30.0%</td><td class="px-2 py-3 text-center">15.0%</td><td class="px-2 py-3 text-center">7.0%</td><td class="px-2 py-3 text-center">3.0%</td><td class="px-4 py-3 text-center font-bold text-gray-700">2.50</td></tr>
                                    </tbody>
                                </table>
                            </div>
                             <p class="text-xs text-gray-500 mt-2 italic">L∆∞u √Ω: Ph√°t bi·ªÉu ERP3 l√† ph√°t bi·ªÉu ng∆∞·ª£c, ƒëi·ªÉm trung b√¨nh th·∫•p th·ªÉ hi·ªán nh·∫≠n th·ª©c ƒë√∫ng ƒë·∫Øn c·ªßa h·ªçc sinh.</p>

                            <!-- Table 5: RC -->
                            <h4 class="text-lg font-semibold text-secondary mt-6">5. H√†nh vi ƒë·ªëi ph√≥ v·ªõi R·ªßi ro (Risk Coping - RC)</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-100">
                                        <tr>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ph√°t bi·ªÉu (RC)</th>
                                            <th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(1) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(2) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(3) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(4) %</th><th class="px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">(5) %</th>
                                            <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Trung b√¨nh </th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                        <tr><td class="px-4 py-3 font-medium">RC2: Ch·ªâ d√πng ƒë·ªÉ s·ª≠a ch·ªØa (kh√¥ng vi·∫øt h·ªô)</td><td class="px-2 py-3 text-center">2.0%</td><td class="px-2 py-3 text-center">8.0%</td><td class="px-2 py-3 text-center">15.0%</td><td class="px-2 py-3 text-center font-bold">40.0%</td><td class="px-2 py-3 text-center font-bold text-secondary">35.0%</td><td class="px-4 py-3 text-center font-bold text-secondary">4.05</td></tr>
                                        <tr><td class="px-4 py-3 font-medium">RC1: Lu√¥n ki·ªÉm tra l·∫°i th√¥ng tin</td><td class="px-2 py-3 text-center">5.0%</td><td class="px-2 py-3 text-center">10.0%</td><td class="px-2 py-3 text-center">25.0%</td><td class="px-2 py-3 text-center font-bold">35.0%</td><td class="px-2 py-3 text-center">25.0%</td><td class="px-4 py-3 text-center font-bold text-secondary">3.80</td></tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </details>
                    <details class="border-b"><summary class="details-summary bg-gray-50 hover:bg-gray-100">V√≠ d·ª• B√†i t·∫≠p ·ª®ng d·ª•ng AI (Prompt Ph·∫£n bi·ªán)</summary><div class="details-content"><p class="font-bold mb-2 text-indigo-700">M·ª•c ti√™u: Ph√°t tri·ªÉn t∆∞ duy ph·∫£n bi·ªán.</p><div class="bg-white p-4 rounded-lg border border-indigo-200"><h4 class="font-semibold text-lg mb-2">B√†i t·∫≠p "Th√°ch th·ª©c AI" (Kh·ªëi 11/12)</h4><ol class="list-decimal list-inside text-gray-700 space-y-2"><li>Y√™u c·∫ßu ChatGPT vi·∫øt m·ªôt ƒëo·∫°n vƒÉn (150 t·ª´) v·ªÅ ch·ªß ƒë·ªÅ "T√°c ƒë·ªông c·ªßa m·∫°ng x√£ h·ªôi".</li><li><span class="font-medium text-secondary">B∆∞·ªõc Ph·∫£n bi·ªán:</span> T√¨m ra 5 c√¢u/c·ª•m t·ª´ c·ªßa AI c√≥ th·ªÉ ƒë∆∞·ª£c di·ªÖn ƒë·∫°t t·ªët h∆°n.</li><li>Vi·∫øt l·∫°i ƒëo·∫°n vƒÉn v√† gi·∫£i th√≠ch l√Ω do thay ƒë·ªïi.</li></ol></div></div></details>
                    <details class="border-b"><summary class="details-summary bg-gray-50 hover:bg-gray-100">H∆∞·ªõng d·∫´n S·ª≠ d·ª•ng AI C√≥ Tr√°ch nhi·ªám</summary><div class="details-content"><p class="font-bold mb-3 text-indigo-700">C√°c b∆∞·ªõc h√†nh ƒë·ªông th·ª±c ti·ªÖn cho h·ªçc sinh:</p><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 bg-white rounded-lg border border-teal-300"><h4 class="font-semibold text-teal-700 mb-2">‚úÖ L√†m ch·ªß K·ªπ thu·∫≠t Prompt: T·ªëi ∆∞u cho Nghe & N√≥i</h4><ul class="list-disc list-outside ml-5 text-gray-700 text-sm"><li>ƒê∆∞a ra vai tr√≤ c·ª• th·ªÉ ("Act as an English teacher").</li><li>**Luy·ªán N√≥i (Speaking):** Y√™u c·∫ßu k·ªãch b·∫£n ƒë·ªëi tho·∫°i, sau ƒë√≥ y√™u c·∫ßu AI s·ª≠a l·ªói v√† n√¢ng c·∫•p c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n.</li><li>**Luy·ªán Nghe (Listening):** Y√™u c·∫ßu AI cung c·∫•p ƒëo·∫°n h·ªôi tho·∫°i ng·∫Øn, sau ƒë√≥ b·∫°n ch√©p l·∫°i v√† AI ki·ªÉm tra (Transcription).</li></ul></div><div class="p-4 bg-white rounded-lg border border-red-300"><h4 class="font-semibold text-red-700 mb-2">‚ùå Ki·ªÉm so√°t M·ª©c ƒë·ªô Ph·ª• thu·ªôc</h4><ul class="list-disc list-outside ml-5 text-gray-700 text-sm"><li>Kh√¥ng d√πng ƒë·ªÉ vi·∫øt to√†n b·ªô b√†i lu·∫≠n.</li><li>Lu√¥n ki·ªÉm tra ch√©o (Cross-check) th√¥ng tin.</li><li>Sau khi AI s·ª≠a l·ªói, t·ª± gi·∫£i th√≠ch t·∫°i sao ƒë√≥ l√† l·ªói.</li></ul></div></div></div></details>
                </div>
            </div>
        </div>

        <!-- Game Demo Tab (Tab 3) - NEW STRUCTURE -->
        <div id="content-game" class="tab-content hidden space-y-8">
            <div class="bg-white p-6 sm:p-8 rounded-xl card border-t-4 border-teal-500">
                <h2 class="text-3xl font-bold mb-4 text-teal-700">Game Demo: Luy·ªán T·∫≠p 4 K·ªπ NƒÉng Ngo·∫°i Ng·ªØ v·ªõi AI</h2>
                <p class="text-gray-600 leading-relaxed mb-6">T√πy ch·ªânh b√†i t·∫≠p c·ªßa b·∫°n. H·ªá th·ªëng AI s·∫Ω t·∫°o ra k·ªãch b·∫£n, vƒÉn b·∫£n ho·∫∑c c√¢u h·ªèi luy·ªán t·∫≠p d·ª±a tr√™n l·ª±a ch·ªçn c·ªßa b·∫°n ƒë·ªÉ t·ªëi ∆∞u h√≥a vi·ªác h·ªçc.</p>
                
                <!-- C·∫•u h√¨nh B√†i t·∫≠p -->
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200">
                    <div>
                        <label for="game-language" class="block text-sm font-medium text-gray-700 mb-1">Ng√¥n ng·ªØ</label>
                        <select id="game-language" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500">
                            <option value="english">Ti·∫øng Anh (English)</option>
                            <option value="japanese">Ti·∫øng Nh·∫≠t (Japanese)</option>
                            <option value="korean">Ti·∫øng H√†n (Korean)</option>
                        </select>
                    </div>
                    <div>
                        <label for="game-topic" class="block text-sm font-medium text-gray-700 mb-1">Ch·ªß ƒë·ªÅ</label>
                        <select id="game-topic" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500">
                            <option value="school">ƒê·ªùi s·ªëng H·ªçc ƒë∆∞·ªùng</option>
                            <option value="travel">Du l·ªãch & VƒÉn h√≥a</option>
                            <option value="science">Khoa h·ªçc & C√¥ng ngh·ªá</option>
                        </select>
                    </div>
                    <div>
                        <label for="game-level" class="block text-sm font-medium text-gray-700 mb-1">C·∫•p ƒë·ªô Kh√≥</label>
                        <select id="game-level" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500">
                            <option value="easy">C∆° b·∫£n (A1/A2)</option>
                            <option value="medium">Trung c·∫•p (B1/B2)</option>
                            <option value="hard">N√¢ng cao (C1/C2)</option>
                        </select>
                    </div>
                </div>

                <!-- Khu v·ª±c 4 K·ªπ nƒÉng -->
                <div class="space-y-6">
                    <!-- K·ªπ nƒÉng NGHE (Listening) -->
                    <div id="skill-listening" class="p-5 bg-primary-light rounded-xl border-l-4 border-indigo-500">
                        <h3 class="text-xl font-bold mb-3 text-indigo-700 flex items-center">
                            <span class="mr-2">üéß</span> Luy·ªán Nghe (Listening)
                        </h3>
                        <p id="listening-scenario" class="text-gray-600 mb-3 italic">Ch·ªçn c·∫•u h√¨nh v√† nh·∫•n "T·∫°o B√†i T·∫≠p" ƒë·ªÉ t·∫°o m·ªôt ƒëo·∫°n h·ªôi tho·∫°i ng·∫Øn v√† c√°c c√¢u h·ªèi.</p>
                        <div id="listening-content" class="bg-white p-3 rounded-lg shadow-inner border border-gray-200 min-h-[50px] flex items-center justify-center text-gray-500 text-sm">
                            <!-- Simulated Audio Player -->
                            <button id="btn-play-audio" class="bg-indigo-400 hover:bg-indigo-500 text-white font-semibold py-1 px-4 rounded-lg transition duration-200 hidden">
                                ‚ñ∂Ô∏è Play Audio (Gi·∫£ l·∫≠p)
                            </button>
                        </div>
                        <div id="listening-questions" class="mt-3 hidden">
                             <h4 class="font-semibold text-gray-700 mb-2">C√¢u h·ªèi tr·∫Øc nghi·ªám:</h4>
                             <ul class="list-disc list-inside ml-4 text-sm space-y-1">
                                <li>Question 1?</li>
                                <li>Question 2?</li>
                             </ul>
                        </div>
                    </div>

                    <!-- K·ªπ nƒÉng N√ìI (Speaking) - Focus area -->
                    <div id="skill-speaking" class="p-5 bg-primary-light rounded-xl border-l-4 border-teal-500">
                        <h3 class="text-xl font-bold mb-3 text-teal-700 flex items-center">
                            <span class="mr-2">üó£Ô∏è</span> Luy·ªán N√≥i (Speaking)
                        </h3>
                        <p id="speaking-scenario" class="text-gray-600 mb-3 italic">Ch·ªçn c·∫•u h√¨nh v√† nh·∫•n "T·∫°o B√†i T·∫≠p" ƒë·ªÉ nh·∫≠n m·ªôt vai tr√≤ v√† ch·ªß ƒë·ªÅ ƒë·ªëi tho·∫°i.</p>
                        <div id="speaking-content" class="bg-white p-4 rounded-lg shadow-inner border border-gray-200 min-h-[100px] overflow-y-auto mb-4">
                            <p class="text-gray-500">AI: [S·∫Ω t·∫°o k·ªãch b·∫£n nh·∫≠p vai t·∫°i ƒë√¢y...]</p>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row justify-center space-y-3 sm:space-y-0 sm:space-x-4">
                            <button id="btn-record" class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md flex items-center justify-center">
                                <span class="mr-2">üéôÔ∏è</span> B·∫Øt ƒê·∫ßu ƒê·ªëi Tho·∫°i
                            </button>
                            <button id="btn-stop-record" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md flex items-center justify-center hidden">
                                <span class="mr-2">üõë</span> D·ª´ng & Ph√¢n T√≠ch
                            </button>
                        </div>
                        <div id="speaking-result" class="mt-4 p-3 bg-gray-100 rounded-lg hidden">
                            <h4 class="font-semibold text-teal-700 mb-1">Ph√¢n t√≠ch Ph·∫£n h·ªìi (AI Feedback)</h4>
                            <p id="speaking-feedback" class="text-sm text-gray-700"></p>
                        </div>
                    </div>

                    <!-- K·ªπ nƒÉng ƒê·ªåC (Reading) -->
                    <div id="skill-reading" class="p-5 bg-primary-light rounded-xl border-l-4 border-indigo-500">
                        <h3 class="text-xl font-bold mb-3 text-indigo-700 flex items-center">
                            <span class="mr-2">üìñ</span> Luy·ªán ƒê·ªçc & Hi·ªÉu (Reading)
                        </h3>
                        <p id="reading-scenario" class="text-gray-600 mb-3 italic">Ch·ªçn c·∫•u h√¨nh v√† nh·∫•n "T·∫°o B√†i T·∫≠p" ƒë·ªÉ nh·∫≠n m·ªôt ƒëo·∫°n vƒÉn b·∫£n v√† c√°c c√¢u h·ªèi ƒë·ªçc hi·ªÉu.</p>
                        <div id="reading-content" class="bg-white p-3 rounded-lg shadow-inner border border-gray-200 min-h-[100px] overflow-y-auto text-sm text-gray-700">
                            [N·ªôi dung vƒÉn b·∫£n s·∫Ω ƒë∆∞·ª£c t·∫°o...]
                        </div>
                        <div id="reading-questions" class="mt-3 hidden">
                             <h4 class="font-semibold text-gray-700 mb-2">C√¢u h·ªèi ƒë·ªçc hi·ªÉu:</h4>
                             <ul class="list-disc list-inside ml-4 text-sm space-y-1">
                                <li>Question 1?</li>
                                <li>Question 2?</li>
                             </ul>
                        </div>
                    </div>

                    <!-- K·ªπ nƒÉng VI·∫æT (Writing) -->
                    <div id="skill-writing" class="p-5 bg-primary-light rounded-xl border-l-4 border-teal-500">
                        <h3 class="text-xl font-bold mb-3 text-teal-700 flex items-center">
                            <span class="mr-2">‚úçÔ∏è</span> Luy·ªán Vi·∫øt (Writing)
                        </h3>
                        <p id="writing-scenario" class="text-gray-600 mb-3 italic">Ch·ªçn c·∫•u h√¨nh v√† nh·∫•n "T·∫°o B√†i T·∫≠p" ƒë·ªÉ nh·∫≠n m·ªôt ƒë·ªÅ t√†i/t√¨nh hu·ªëng vi·∫øt.</p>
                        <div id="writing-prompt" class="bg-white p-3 rounded-lg shadow-inner border border-gray-200 min-h-[50px] mb-3 text-gray-700 font-medium">
                            [ƒê·ªÅ t√†i vi·∫øt s·∫Ω ƒë∆∞·ª£c t·∫°o...]
                        </div>
                        <textarea id="writing-input" rows="4" class="w-full p-3 border rounded-lg focus:ring-teal-500 focus:border-teal-500 text-sm" placeholder="Vi·∫øt c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n t·∫°i ƒë√¢y..."></textarea>
                        <button id="btn-submit-writing" class="mt-3 bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">
                            N·ªôp b√†i & Nh·∫≠n Ph·∫£n h·ªìi AI
                        </button>
                        <div id="writing-result" class="mt-4 p-3 bg-gray-100 rounded-lg hidden">
                            <h4 class="font-semibold text-teal-700 mb-1">Ph√¢n t√≠ch Ph·∫£n h·ªìi (AI Feedback)</h4>
                            <p id="writing-feedback" class="text-sm text-gray-700"></p>
                        </div>
                    </div>
                </div>

                <!-- N√∫t T·∫°o B√†i T·∫≠p Chung -->
                <div class="text-center mt-8">
                    <button id="btn-generate-all" class="bg-indigo-600 hover:bg-indigo-700 text-white font-extrabold text-lg py-3 px-10 rounded-xl transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.01]">
                        T·∫°o B√†i T·∫≠p M·ªõi Cho 4 K·ªπ NƒÉng
                    </button>
                </div>
                
                <div id="game-status-general" class="text-center text-sm mt-4 text-gray-600 font-medium">Ch·ªçn c·∫•u h√¨nh v√† nh·∫•n n√∫t ƒë·ªÉ b·∫Øt ƒë·∫ßu.</div>
            </div>
        </div>

    </main>

    <script>
        const data = {
            // Updated Averages from the provided data (N=100)
            avg: {
                pu: 3.89,
                peou: 4.22,
                at: 4.17,
                erp: 3.41
            },
            // Data for PU vs PEOU Chart (Averages for each item)
            puData: [4.25, 4.10, 3.95, 3.65, 3.50], // PU4, PU2, PU3, PU5, PU1
            peouData: [4.30, 4.20, 4.15], // PEOU2, PEOU1, PEOU3
            // Data for AT vs ERP Chart (Overall Averages)
            atErpData: [4.17, 3.41]
        };

        const chartColors = {
            primary: '#4f46e5', // Indigo
            secondary: '#14b8a6', // Teal
            accentRed: '#ef4444', // Red
            gray: '#d1d5db'
        };

        function initStats() {
            const duration = 1500;
            animateValue("stat-pu", 0, data.avg.pu, duration, 2);
            animateValue("stat-peou", 0, data.avg.peou, duration, 2);
            animateValue("stat-at", 0, data.avg.at, duration, 2);
            animateValue("stat-erp", 0, data.avg.erp, duration, 2);
        }

        function animateValue(id, start, end, duration, decimals) {
            const obj = document.getElementById(id);
            if (!obj) return;
            const range = end - start;
            let current = start;
            const increment = range / (duration / 10);
            const step = Math.pow(10, decimals);
            const timer = setInterval(() => {
                current += increment;
                if ((range > 0 && current >= end) || (range < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                obj.textContent = current.toFixed(decimals);
            }, 10);
        }

        function initCharts() {
            const ctxPuPeou = document.getElementById('chart-pu-peou').getContext('2d');
            new Chart(ctxPuPeou, {
                type: 'bar',
                data: {
                    labels: ['PU4 (Vi·∫øt)', 'PU2 (T·ª´ V·ª±ng)', 'PU3 (Ti·∫øt Ki·ªám)', 'PU5 (H·ªôi Tho·∫°i)', 'PU1 (ƒêi·ªÉm S·ªë)', 'PEOU2 (Giao Di·ªán)', 'PEOU1 (D·ªÖ D√†ng)', 'PEOU3 (T√¨m Ki·∫øm)'],
                    datasets: [{
                        label: 'M·ª©c ƒê·ªô ƒê·ªìng √ù (1-5)',
                        data: [...data.puData, ...data.peouData],
                        backgroundColor: [
                            chartColors.primary, chartColors.primary, chartColors.primary, chartColors.primary, chartColors.primary,
                            chartColors.secondary, chartColors.secondary, chartColors.secondary
                        ],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'So S√°nh T·ª´ng Item PU/PEOU (ƒêi·ªÉm TB)', font: { size: 14, weight: 'bold' } },
                        tooltip: {
                            callbacks: {
                                label: (context) => `ƒêi·ªÉm TB: ${context.formattedValue}`
                            }
                        }
                    },
                    scales: {
                        x: { beginAtZero: true, max: 5.0, title: { display: true, text: 'ƒêi·ªÉm Trung B√¨nh (1-5)' } }
                    }
                }
            });

            const ctxAtErp = document.getElementById('chart-at-erp').getContext('2d');
            new Chart(ctxAtErp, {
                type: 'polarArea',
                data: {
                    labels: ['Th√°i ƒê·ªô T√≠ch C·ª±c ($\bar{X}_{AT}$)', 'Nh·∫≠n th·ª©c R·ªßi ro ($\bar{X}_{ERP}$)'],
                    datasets: [{
                        data: data.atErpData,
                        backgroundColor: [chartColors.primary, chartColors.accentRed],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        title: { display: true, text: 'Th√°i ƒê·ªô vs R·ªßi Ro (ƒêi·ªÉm TB T·ªïng Th·ªÉ)', font: { size: 14, weight: 'bold' } },
                        tooltip: {
                            callbacks: {
                                label: (context) => `${context.label}: ${context.formattedValue}`
                            }
                        }
                    },
                    scales: {
                        r: { suggestedMin: 0, suggestedMax: 5, pointLabels: { display: true, centerPointLabels: true, font: { size: 14 } } }
                    }
                }
            });
        }

        function changeTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(`content-${tabId}`).classList.remove('hidden');

            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active', 'text-indigo-700');
                button.classList.add('text-gray-600');
            });
            const activeBtn = document.getElementById(`tab-${tabId}`);
            if (activeBtn) {
                activeBtn.classList.add('active', 'text-indigo-700');
                activeBtn.classList.remove('text-gray-600');
            }
        }

        // --- GAME LOGIC START ---

        const btnGenerateAll = document.getElementById('btn-generate-all');
        const gameStatusGeneral = document.getElementById('game-status-general');

        // Speaking elements
        const btnRecord = document.getElementById('btn-record');
        const btnStopRecord = document.getElementById('btn-stop-record');
        const speakingContent = document.getElementById('speaking-content');
        const speakingResult = document.getElementById('speaking-result');
        const speakingFeedback = document.getElementById('speaking-feedback');
        let isRecording = false;

        // Writing elements
        const writingInput = document.getElementById('writing-input');
        const btnSubmitWriting = document.getElementById('btn-submit-writing');
        const writingResult = document.getElementById('writing-result');
        const writingFeedback = document.getElementById('writing-feedback');

        // Functions to simulate AI content generation
        function generateAIContent(skill, lang, topic, level) {
            let content = {};
            
            // Common context for all skills
            const context = `Ng√¥n ng·ªØ: ${lang === 'english' ? 'Ti·∫øng Anh' : lang === 'japanese' ? 'Ti·∫øng Nh·∫≠t' : 'Ti·∫øng H√†n'}. Ch·ªß ƒë·ªÅ: ${topic === 'school' ? 'H·ªçc ƒë∆∞·ªùng' : topic === 'travel' ? 'Du l·ªãch' : 'Khoa h·ªçc'}. C·∫•p ƒë·ªô: ${level === 'easy' ? 'C∆° b·∫£n' : level === 'medium' ? 'Trung c·∫•p' : 'N√¢ng cao'}.`;

            if (skill === 'listening') {
                const audioTitle = level === 'easy' ? 'H·ªôi tho·∫°i ng·∫Øn v·ªÅ th·ªùi ti·∫øt' : level === 'medium' ? 'Ph·ªèng v·∫•n nhanh v·ªÅ th√≥i quen h·ªçc t·∫≠p' : 'B√†i di·ªÖn thuy·∫øt v·ªÅ tr√≠ tu·ªá nh√¢n t·∫°o';
                const questions = level === 'easy' ? 2 : 3;
                content.audioTitle = audioTitle;
                content.questions = Array.from({ length: questions }, (_, i) => `C√¢u h·ªèi ${i + 1} v·ªÅ n·ªôi dung v·ª´a nghe? (Gi·∫£ l·∫≠p)`);
                content.scenario = `ƒêo·∫°n Audio (Gi·∫£ l·∫≠p) ƒë√£ ƒë∆∞·ª£c t·∫°o: "${audioTitle}". Vui l√≤ng nh·∫•n n√∫t Play ƒë·ªÉ nghe. (${context})`;
            } else if (skill === 'speaking') {
                const role = level === 'easy' ? 'B·∫°n l√† kh√°ch du l·ªãch h·ªèi ƒë∆∞·ªùng' : level === 'medium' ? 'B·∫°n l√† sinh vi√™n ƒëang tranh lu·∫≠n v·ªÅ vi·ªác s·ª≠ d·ª•ng AI' : 'B·∫°n l√† di·ªÖn gi·∫£ tr√¨nh b√†y √Ω t∆∞·ªüng kh·ªüi nghi·ªáp';
                const aiPrompt = level === 'easy' ? 'AI (ng∆∞·ªùi b·∫£n x·ª©) s·∫Ω h·ªèi: B·∫°n c√≥ th·ªÉ gi√∫p t√¥i t√¨m ƒë∆∞·ªùng ƒë·∫øn b∆∞u ƒëi·ªán g·∫ßn nh·∫•t kh√¥ng?' : level === 'medium' ? 'AI (gi√°o s∆∞) s·∫Ω h·ªèi: B·∫°n nghƒ© AI n√™n ƒë∆∞·ª£c t√≠ch h·ª£p nh∆∞ th·∫ø n√†o trong l·ªõp h·ªçc?' : 'AI (nh√† ƒë·∫ßu t∆∞) s·∫Ω h·ªèi: √ù t∆∞·ªüng c·ªßa b·∫°n gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ g√¨?';
                content.role = role;
                content.aiPrompt = `AI (${lang}): ${aiPrompt}`;
                content.scenario = `Vai tr√≤ c·ªßa b·∫°n: <span class="font-semibold text-teal-600">${role}</span>. B·∫Øt ƒë·∫ßu ƒë·ªëi tho·∫°i! (${context})`;
            } else if (skill === 'reading') {
                const title = level === 'easy' ? 'C√¢u chuy·ªán ng·∫Øn v·ªÅ th√∫ c∆∞ng' : level === 'medium' ? 'B√†i b√°o v·ªÅ c√°c ƒëi·ªÉm ƒë·∫øn du l·ªãch n·ªïi ti·∫øng' : 'T√≥m t·∫Øt nghi√™n c·ª©u v·ªÅ bi·∫øn ƒë·ªïi kh√≠ h·∫≠u';
                const article = level === 'easy' ? 'H√¥m nay, m·ªôt ch√∫ m√®o t√™n l√† Leo ƒë√£ t√¨m th·∫•y m·ªôt qu·∫£ b√≥ng m√†u ƒë·ªè trong v∆∞·ªùn. Leo r·∫•t th√≠ch ch∆°i v·ªõi qu·∫£ b√≥ng. ƒê√≥ l√† m·ªôt ng√†y n·∫Øng.' : level === 'medium' ? 'Du l·ªãch ƒë√£ tr·ªü l·∫°i m·∫°nh m·∫Ω sau ƒë·∫°i d·ªãch. Nhi·ªÅu ng∆∞·ªùi ƒëang t√¨m ki·∫øm nh·ªØng tr·∫£i nghi·ªám du l·ªãch b·ªÅn v·ªØng v√† c√≥ tr√°ch nhi·ªám.' : 'Tr√≠ tu·ªá nh√¢n t·∫°o ƒëang thay ƒë·ªïi c√°ch ch√∫ng ta t∆∞∆°ng t√°c v·ªõi th·∫ø gi·ªõi. Tuy nhi√™n, c√°c v·∫•n ƒë·ªÅ v·ªÅ ƒë·∫°o ƒë·ª©c v√† quy·ªÅn ri√™ng t∆∞ v·∫´n l√† m·ªëi quan t√¢m h√†ng ƒë·∫ßu.';
                const questions = level === 'easy' ? 2 : 4;
                content.article = article;
                content.questions = Array.from({ length: questions }, (_, i) => `C√¢u h·ªèi ƒë·ªçc hi·ªÉu ${i + 1}? (Gi·∫£ l·∫≠p)`);
                content.scenario = `VƒÉn b·∫£n (Gi·∫£ l·∫≠p) ƒë√£ ƒë∆∞·ª£c t·∫°o: "${title}". Vui l√≤ng ƒë·ªçc k·ªπ v√† tr·∫£ l·ªùi c√°c c√¢u h·ªèi. (${context})`;
            } else if (skill === 'writing') {
                const prompt = level === 'easy' ? 'Vi·∫øt 5 c√¢u v·ªÅ k·ª≥ ngh·ªâ h√® c·ªßa b·∫°n.' : level === 'medium' ? 'Vi·∫øt m·ªôt ƒëo·∫°n vƒÉn (100 t·ª´) tr√¨nh b√†y √Ω ki·∫øn v·ªÅ vi·ªác h·ªçc tr·ª±c tuy·∫øn.' : 'Vi·∫øt m·ªôt b√†i lu·∫≠n ng·∫Øn (200 t·ª´) v·ªÅ ∆∞u v√† nh∆∞·ª£c ƒëi·ªÉm c·ªßa c√¥ng ngh·ªá AI trong gi√°o d·ª•c.';
                content.prompt = prompt;
                content.scenario = `ƒê·ªÅ t√†i (Gi·∫£ l·∫≠p) ƒë√£ ƒë∆∞·ª£c t·∫°o: "${prompt}". Vui l√≤ng vi·∫øt c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n v√†o √¥ b√™n d∆∞·ªõi. (${context})`;
            }
            return content;
        }

        // Main generation function
        function generateAllExercises() {
            const lang = document.getElementById('game-language').value;
            const topic = document.getElementById('game-topic').value;
            const level = document.getElementById('game-level').value;

            gameStatusGeneral.textContent = `ƒêang t·∫°o b√†i t·∫≠p (${lang}, ${topic}, ${level})... Vui l√≤ng ch·ªù.`;
            
            // 1. Listening
            const listeningData = generateAIContent('listening', lang, topic, level);
            document.getElementById('listening-scenario').innerHTML = listeningData.scenario;
            document.getElementById('btn-play-audio').classList.remove('hidden');
            const lq = document.getElementById('listening-questions');
            lq.classList.remove('hidden');
            lq.querySelector('ul').innerHTML = listeningData.questions.map(q => `<li>${q}</li>`).join('');

            // 2. Speaking
            const speakingData = generateAIContent('speaking', lang, topic, level);
            document.getElementById('speaking-scenario').innerHTML = speakingData.scenario;
            speakingContent.innerHTML = `<p class="text-gray-500 font-medium">${speakingData.aiPrompt}</p>`;
            btnRecord.classList.remove('hidden');
            btnStopRecord.classList.add('hidden');
            speakingResult.classList.add('hidden');

            // 3. Reading
            const readingData = generateAIContent('reading', lang, topic, level);
            document.getElementById('reading-scenario').innerHTML = readingData.scenario;
            document.getElementById('reading-content').textContent = readingData.article;
            const rq = document.getElementById('reading-questions');
            rq.classList.remove('hidden');
            rq.querySelector('ul').innerHTML = readingData.questions.map(q => `<li>${q}</li>`).join('');

            // 4. Writing
            const writingData = generateAIContent('writing', lang, topic, level);
            document.getElementById('writing-scenario').innerHTML = writingData.scenario;
            document.getElementById('writing-prompt').textContent = writingData.prompt;
            writingInput.value = '';
            writingResult.classList.add('hidden');
            
            gameStatusGeneral.textContent = `‚úÖ ƒê√£ t·∫°o b√†i t·∫≠p th√†nh c√¥ng! B·∫Øt ƒë·∫ßu luy·ªán t·∫≠p.`;
        }

        btnGenerateAll.addEventListener('click', generateAllExercises);
        
        // --- GAME SIMULATION LOGIC ---

        // Speaking Simulation
        btnRecord.addEventListener('click', () => {
            if (isRecording) return;
            isRecording = true;
            btnRecord.classList.add('hidden');
            btnStopRecord.classList.remove('hidden');
            gameStatusGeneral.textContent = "üî¥ ƒêang ghi √¢m... (Gi·∫£ l·∫≠p: 4 gi√¢y)";
            speakingResult.classList.add('hidden');
            speakingContent.innerHTML += `<p class="text-teal-600 font-medium mt-2">-- B·∫Øt ƒë·∫ßu tr·∫£ l·ªùi (Gi·∫£ l·∫≠p)...</p>`;
            speakingContent.scrollTop = speakingContent.scrollHeight;
            
            setTimeout(() => {
                if (isRecording) {
                    btnStopRecord.click(); 
                    
                    const feedback = [
                        "Ph·∫£n h·ªìi xu·∫•t s·∫Øc! B·∫°n ƒë√£ s·ª≠ d·ª•ng th√†nh c√¥ng thu·∫≠t ng·ªØ 'AI integration'. Ng·ªØ ph√°p v√† l∆∞u lo√°t r·∫•t t·ªët (4.5/5).",
                        "Ph·∫£n h·ªìi t·ªët. B·∫°n n√™n c·∫£i thi·ªán c√°ch d√πng gi·ªõi t·ª´. Th·ª≠ n√≥i 'I'm excited about the future of online learning' thay v√¨ 'I excited of the future'. ƒêi·ªÉm: 3.8/5.",
                        "Ph·∫£n h·ªìi trung b√¨nh. T·ªëc ƒë·ªô n√≥i h∆°i nhanh v√† m·∫Øc m·ªôt l·ªói th√¨ qu√° kh·ª©. C·ªë g·∫Øng luy·ªán t·∫≠p th√™m s·ª± t·ª± tin khi tranh lu·∫≠n. ƒêi·ªÉm: 3.2/5."
                    ];
                    
                    speakingFeedback.innerHTML = `<span class="font-bold text-teal-600">Ph·∫£n h·ªìi AI:</span> ${feedback[Math.floor(Math.random() * feedback.length)]} <br><br> ƒê√¢y l√† c√°ch AI gi√∫p b·∫°n tƒÉng c∆∞·ªùng k·ªπ nƒÉng N√≥i (PU5).`;
                    speakingResult.classList.remove('hidden');
                    gameStatusGeneral.textContent = "‚úÖ Ph√¢n t√≠ch v√† ph·∫£n h·ªìi ƒë√£ ho√†n th√†nh!";
                    speakingContent.innerHTML += `<p class="text-indigo-500 mt-2">-- K·∫øt th√∫c c√¢u tr·∫£ l·ªùi --</p>`;
                    speakingContent.scrollTop = speakingContent.scrollHeight;
                }
            }, 4000); // Record for 4 seconds
        });

        btnStopRecord.addEventListener('click', () => {
            isRecording = false;
            btnRecord.classList.remove('hidden');
            btnStopRecord.classList.add('hidden');
            gameStatusGeneral.textContent = "ƒê√£ d·ª´ng ghi √¢m. ƒêang ch·ªù ph√¢n t√≠ch...";
        });
        
        // Writing Simulation
        btnSubmitWriting.addEventListener('click', () => {
            const answer = writingInput.value.trim();
            if (answer.length < 20) {
                 gameStatusGeneral.textContent = "‚ö†Ô∏è Vui l√≤ng vi·∫øt c√¢u tr·∫£ l·ªùi d√†i h∆°n (√≠t nh·∫•t 20 k√Ω t·ª±) ƒë·ªÉ AI ph√¢n t√≠ch.";
                 return;
            }
            gameStatusGeneral.textContent = "‚è≥ ƒêang n·ªôp b√†i v√† ch·ªù AI ph√¢n t√≠ch/s·ª≠a l·ªói...";
            writingResult.classList.add('hidden');
            
            setTimeout(() => {
                const mistakes = Math.floor(Math.random() * 3) + 1;
                const feedback = mistakes === 1 ?
                    "B√†i vi·∫øt t·ªët. Ch·ªâ m·∫Øc m·ªôt l·ªói nh·ªè v·ªÅ ch√≠nh t·∫£: 'recieve' n√™n s·ª≠a th√†nh 'receive'. C·∫•u tr√∫c c√¢u v√† √Ω t∆∞·ªüng r·∫•t r√µ r√†ng. ƒêi·ªÉm: 4.5/5." : mistakes === 2 ?
                    "B√†i vi·∫øt kh√° t·ªët. AI ƒë√£ t√¨m th·∫•y 2 l·ªói ng·ªØ ph√°p: L·ªói th·ª© nh·∫•t v·ªÅ th√¨ hi·ªán t·∫°i ho√†n th√†nh, l·ªói th·ª© hai v·ªÅ s·ª± h√≤a h·ª£p ch·ªß ng·ªØ/ƒë·ªông t·ª´. Th·ª≠ vi·∫øt l·∫°i c√¢u ƒë√≥ xem sao. ƒêi·ªÉm: 3.8/5." :
                    "C·∫ßn c·∫£i thi·ªán. B√†i vi·∫øt c√≥ 3 l·ªói ng·ªØ ph√°p v√† t·ª´ v·ª±ng ch∆∞a ƒëa d·∫°ng. Th·ª≠ s·ª≠ d·ª•ng c√°c t·ª´ n·ªëi (e.g., 'However', 'In conclusion') ƒë·ªÉ tƒÉng t√≠nh m·∫°ch l·∫°c. ƒêi·ªÉm: 3.2/5.";
                
                writingFeedback.innerHTML = `<span class="font-bold text-teal-600">Ph·∫£n h·ªìi AI:</span> ${feedback} <br><br> AI gi√∫p b·∫°n t·∫≠p trung v√†o k·ªπ nƒÉng Vi·∫øt (PU4) v√† s·ª≠a l·ªói m·ªôt c√°ch c√≥ tr√°ch nhi·ªám (RC2).`;
                writingResult.classList.remove('hidden');
                gameStatusGeneral.textContent = "‚úÖ Ph√¢n t√≠ch Vi·∫øt ƒë√£ ho√†n th√†nh!";
            }, 2500);
        });

        // Listening Play Simulation
        document.getElementById('btn-play-audio').addEventListener('click', () => {
            gameStatusGeneral.textContent = "‚ñ∂Ô∏è Audio ƒëang ph√°t... (Gi·∫£ l·∫≠p)";
            setTimeout(() => {
                gameStatusGeneral.textContent = "‚úÖ Audio ho√†n t·∫•t. Vui l√≤ng tr·∫£ l·ªùi c√¢u h·ªèi.";
            }, 3000);
        });
        
        // --- GAME LOGIC END ---

        // Initialize on load
        window.onload = function() {
            initStats();
            initCharts();
            // Set initial tab based on URL hash or default to overview
            const hash = window.location.hash.replace('#', '');
            if (hash && document.getElementById(`content-${hash}`)) {
                changeTab(hash);
            } else {
                changeTab('overview');
            }

            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    const tabId = e.target.id.replace('tab-', '');
                    changeTab(tabId);
                    window.location.hash = tabId;
                });
            });
            
            // Initialize game content on load (generate default easy English exercises)
            generateAllExercises();
        };
    </script>
</body>
</html>
